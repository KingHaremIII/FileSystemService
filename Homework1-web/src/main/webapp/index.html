<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <!-- Font awesome import -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css">
        
        <!-- Bootstrap import -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        
        <!-- AngularJs import -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
        
        
        <!-- main css -->
        <link rel="stylesheet" href="main.css">
        
        <!-- main controller import -->
        <script src="mainController.js"></script>

    </head>
    <body>
        <div ng-app="myApp" ng-controller="mainCtrl"> 
            <div style="text-align:center; padding:20px;" class="d-flex align-items-center justify-content-between">
                <div class="d-flex">
                    <img style="width:45px; height: 45px;" src="res/main-icon.png">
                    <h1 class="mb-0 ml-2">File System Service</h1>
                </div>
                <div>
                    <a href="/Homework1-web/LoadGeneratorServlet"><button class="btn btn-primary">Start Automatic Test</button></a>
                    <a href="https://github.com/orazioscavo13/FileSystemService"><button class="btn btn-success">Go to Official Repo (GIT)</button></a>
                </div>
            </div>
            <hr>
            <div style="text-align:center; padding: 20px;">
                <div class="row m-0">
                    <div class="col-md-12 pb-4">
                        <h3>
                            Current Path: 
                            <span class="text-primary">FileSystemService{{pathWithSlash}}</span>
                        </h3>
                    </div>
                    
                    <!-- DIRECTORIES -->
                    <div class="col-md-6 card p-0">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h4>Directories</h4>
                            <div><span class="fa fa-arrow-circle-left cursor-pointer" ng-click="getDirectories(previousPath)" data-toggle="tooltip" title="Indietro"></span></div>
                        </div>
                        <div class="card-body">
                            <div>
                                <ul class="w-100 p-0 m-0 list-group">
                                    <li ng-show="directories.length == 0" class="list-group-item">Nessuna directory presente! Creane una tramite il pulsante in basso! <span class="fa fa-arrow-circle-down"></span></li>
                                    <li class="d-flex align-items-center justify-content-between list-group-item" ng-repeat="directory in directories track by $index">
                                        <div>
                                            <img class="list-image cursor-pointer" src="res/folder.png" ng-click="getDirectories(path + (path=='*' ? directory.name : ('*' + directory.name)))" data-toggle="tooltip" title="Apri directory">
                                            <span class="ml-2">{{directory.name}}</span>
                                        </div>
                                        <div class="ml-3 cursor-pointer" ng-click="deleteDirectory(directory.name)" data-toggle="tooltip" title="Elimina directory">
                                            <img class="small-list-image cursor-pointer" src="res/delete.png">
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-footer">
                             <div class="d-flex align-items-center justify-content-end">
                                <div class="form-group m-0"><input type="text" class="form-control form-control-sm" placeholder="Name" name="name" ng-model="inputs.newDirectoryName"></div>
                                <button type="button" class="btn btn-secondary btn-sm ml-2" ng-click="createDirectory(inputs.newDirectoryName)"><span class="fa fa-plus-circle"></span> Add Directory</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FILES -->
                    <div class="col-md-6 card p-0">
                        <div class="card-header d-flex align-items-center justify-content-between">
                            <h4>Directories</h4>
                            <div><span class="fa fa-arrow-circle-left cursor-pointer" ng-click="getDirectories(previousPath)"></span></div>
                        </div>
                        <div class="card-body">
                            <div>
                                <ul class="w-100 p-0 m-0 list-group">
                                    <li ng-show="files.length == 0" class="list-group-item">Nessun file presente! Creane uno tramite il pulsante in basso! <span class="fa fa-arrow-circle-down"></span></li>
                                    <li class="d-flex align-items-center justify-content-between list-group-item" ng-repeat="file in files track by $index">
                                        <div>
                                            <img class="list-image cursor-pointer" src="res/file.png" ng-click="getDirectories(path + (path=='*' ? file.name : ('*' + file.name)))">
                                            <span class="ml-2">{{file.name}}</span>
                                        </div>
                                        <div class="ml-3 cursor-pointer" ng-click="deleteDirectory(file.name)">
                                            <img class="small-list-image" src="res/download.png">
                                            <img class="small-list-image cursor-pointer" src="res/delete.png">
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-footer">
                             <div class="d-flex align-items-center justify-content-end">
                                <div class="form-group m-0">
                                    <input type="file" id="file1" name="file" ng-files="getTheFiles($files)"/>
                                </div>
                                <button type="button" class="btn btn-secondary btn-sm ml-2" ng-click="uploadFiles()"><span class="fa fa-plus-circle"></span> Upload File</button>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
